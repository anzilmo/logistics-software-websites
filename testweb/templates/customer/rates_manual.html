{% extends "rate.html" %}
{% block title %}Manual Rate Calculator{% endblock %}

{% block content %}
<h3 class="mb-3">Manual Rate Calculator</h3>

<form method="post" class="card p-3 mb-4">
  {% csrf_token %}
  <div class="row g-3">
    <div class="col-6 col-md-3">
      <label class="form-label">Length (cm)</label>
      <input name="length" value="{{ length|default:'' }}" type="number" step="0.01" class="form-control" required>
    </div>
    <div class="col-6 col-md-3">
      <label class="form-label">Width (cm)</label>
      <input name="width" value="{{ width|default:'' }}" type="number" step="0.01" class="form-control" required>
    </div>
    <div class="col-6 col-md-3">
      <label class="form-label">Height (cm)</label>
      <input name="height" value="{{ height|default:'' }}" type="number" step="0.01" class="form-control" required>
    </div>
    <div class="col-6 col-md-3">
      <label class="form-label">Gross weight (kg)</label>
      <input name="grossweight" value="{{ gross_weight|default:'' }}" type="number" step="0.01" class="form-control" required>
    </div>
  </div>
  <div class="mt-3 d-flex gap-2">
    <button class="btn btn-primary">Calculate</button>
    <a href="{% url 'rates_manual' %}" class="btn btn-outline-secondary">Clear</a>
  </div>
</form>

{% if chargeable_weight %}
  <div class="row g-3 mb-3">
    <div class="col-md-4">
      <div class="card p-3">
        <div class="small text-muted">Volume weight (kg)</div>
        <div class="fs-5">{{ volume_weight }}</div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card p-3">
        <div class="small text-muted">Gross weight (kg)</div>
        <div class="fs-5">{{ gross_weight }}</div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card p-3">
        <div class="small text-muted">Chargeable (kg)</div>
        <div class="fs-5">{{ chargeable_weight }}</div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">Prices</div>
    <div class="table-responsive">
      <table class="table align-middle mb-0">
        <thead>
          <tr>
            <th>Courier</th>
            <th class="text-end">Price</th>
          </tr>
        </thead>
        <tbody>
          {% for r in rates_data %}
            <tr>
              <td>{{ r.courier }}</td>
              <td class="text-end">{{ r.price }} {{ r.currency }}</td>
            </tr>
          {% empty %}
            <tr><td colspan="2" class="text-center text-muted py-4">No active rates</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endif %}
{% endblock %}
