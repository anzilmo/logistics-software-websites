{# templates/customer/console_list.html #}
{% load static %}

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Console — Shipments</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{% static 'css/app.css' %}">
  <style>
    body{font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#f7f7fb;color:#111}
    .wrap{max-width:1200px;margin:24px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:1fr;gap:16px;align-items:start}
    .card{background:#fff;border:1px solid #ff7f0fff;border-radius:12px;padding:16px}
    .muted{color:#6b7280}.small{font-size:12px}.right{text-align:right}
    table{width:100%;border-collapse:collapse;table-layout:fixed}
    th,td{padding:8px;border-bottom:1px solid #3b099fff;vertical-align:middle}
    thead th{background:#fafafe}
    .actions{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .btn{display:inline-block;padding:8px 12px;border:1px solid #001a56ff;border-radius:8px;background:#fff;cursor:pointer}
    .pill{display:inline-block;padding:2px 8px;border:1px solid #f98704ff;border-radius:999px;font-size:12px;color:#374151}
    .w-160{width:160px}
    .mb-0{margin-bottom:0}.mb-1{margin-bottom:8px}.mb-2{margin-bottom:12px}.mb-3{margin-bottom:16px}
    .mt-1{margin-top:8px}.mt-2{margin-top:12px}.mt-3{margin-top:16px}
    select,input[type=text]{padding:6px 8px;border:1px solid #0e2865ff;border-radius:8px;background:#fff}

    /* alignment helpers */
    .col-check{width:28px}
    .col-id{width:80px}
    .col-suit{width:140px}
    .col-track{width:220px}
    .col-dims{width:220px}
    .col-gross{width:120px}
    .col-status{width:140px}
    .col-courier{width:160px}

    .num{text-align:right}
    .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
    .nowrap{white-space:nowrap}
  </style>
</head>
<body>
<div class="wrap">

  {% if messages %}
    <div class="mb-2">
      {% for message in messages %}
        <div class="small {% if message.tags %}{{ message.tags }}{% endif %}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}

  <div class="grid">
    <div class="card">
      <div class="actions mb-2" style="justify-content:space-between">
        <h2 class="mb-0">Shipments <span class="pill">{{ shipments|length }} shown</span></h2>

        <form method="get" class="actions">
          <label class="small muted" for="status">Filter</label>
          <select name="status" id="status">
            <option value="">All</option>
            {% if status_counts %}
              {% for s in status_counts %}
                <option value="{{ s.status }}" {% if active_status == s.status %}selected{% endif %}>
                  {{ s.status }} ({{ s.count }})
                </option>
              {% endfor %}
            {% endif %}
          </select>
          <button type="submit" class="btn">Apply</button>
          {% if active_status %}
            <a class="small muted" href=".">clear</a>
          {% endif %}
        </form>
      </div>

      <form method="get" action="{% url 'customer:console_details' %}">

        <table>
          <thead>
            <tr>
              <th class="col-check"></th>
              <th class="col-id num">ID</th>
              <th class="col-suit">Suit</th>
              <th class="col-track">Tracking</th>
              <th class="col-dims">Dims (cm)</th>
              <th class="col-gross num">Gross (kg)</th>
              <th class="col-status">Status</th>
              <th class="col-courier">Courier</th>
            </tr>
          </thead>
          <tbody>
          {% for s in shipments %}
            <tr>
              <td class="col-check">
                <input type="checkbox" name="shipment_ids" value="{{ s.pk }}">
              </td>
              <td class="col-id num nowrap">{{ s.pk }}</td>
              <td class="col-suit nowrap">{{ s.suit_number|default:"—" }}</td>
              <td class="col-track small mono nowrap">{{ s.tracking_number|default:"—" }}</td>
              <td class="col-dims small mono nowrap">
                {{ s.length_cm|default:"—" }}×{{ s.width_cm|default:"—" }}×{{ s.height_cm|default:"—" }}
              </td>
              <td class="col-gross num">{{ s.gross_weight|default:"0.000" }}</td>
              <td class="col-status small">{{ s.status|default:"—" }}</td>
              <td class="col-courier small">
                {% if s.selected_courier %}{{ s.selected_courier.name }}{% else %}<span class="muted">n/a</span>{% endif %}
              </td>
            </tr>
          {% empty %}
            <tr><td colspan="8" class="muted">No shipments found.</td></tr>
          {% endfor %}
          </tbody>
        </table>

       
        <div class="mt-3">
          <button type="submit" class="btn btn-success">View Consolidation Details</button>
        </div>
        
      </form>
    </div>
  </div>
</div>
</body>
</html>
