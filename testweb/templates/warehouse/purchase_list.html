{% extends "main.html" %}
{% block content %}

    

{% if purchases %}
<table class="purchases-table">
    <thead>
        <tr>
            <th>suit no</th>
            <th>Invoice Number</th>
            <th>Supplier</th>
            <th>Date</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for p in purchases %}
        <tr>
            <td class="supplier">{{ p.suit_number }}</td>
            <td><a href="{% url 'warehouse:purchase_detail' p.pk %}" class="invoice-number">{{ p.invoice_number }}</a></td>
            <td class="supplier">{{ p.supplier }}</td>
            <td class="date">{{ p.date }}</td>
            <td class="amount">${{ p.amount }}</td>
            <td>
                <span class="status {% if p.status == 'Paid' %}status-paid{% else %}status-pending{% endif %}">
                    {{ p.status }}
                </span>
            </td>
            <td class="actions">
                <a href="{% url 'warehouse:purchase_detail' p.pk %}" class="action-btn" title="View">
                    <i class="fas fa-eye"></i>
                </a>
                {% if p.pdf %}
                <a href="{% url 'warehouse_purchase_download' p.pk %}" class="action-btn" title="Download PDF">
                    <i class="fas fa-download"></i>
                </a>
                {% endif %}
                <button class="action-btn" title="More Options">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="pagination">
    {% if purchases.has_previous %}
    <a class="pagination-btn" href="?page={{ purchases.previous_page_number }}">&laquo; Previous</a>
    {% endif %}
    {% for num in purchases.paginator.page_range %}
        {% if purchases.number == num %}
            <span class="pagination-btn active">{{ num }}</span>
        {% else %}
            <a class="pagination-btn" href="?page={{ num }}">{{ num }}</a>
        {% endif %}
    {% endfor %}
    {% if purchases.has_next %}
    <a class="pagination-btn" href="?page={{ purchases.next_page_number }}">Next &raquo;</a>
    {% endif %}
</div>

{% else %}
<div class="empty-state">
    <i class="fas fa-file-invoice"></i>
    <p>No purchase bills found.</p>
</div>
{% endif %}

<script>
document.addEventListener('DOMContentLoaded', function() {
    const actionButtons = document.querySelectorAll('.action-btn');
    actionButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            if (this.title === 'More Options') {
                e.preventDefault();
                alert('More options menu would open here');
            }
        });
    });
});
</script>
{% endblock %}
